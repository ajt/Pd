#N canvas 284 229 1004 629 12;
#X obj 648 85 table \$0-buffer;
#X obj 480 90 soundfiler;
#X obj 480 146 samplerate~;
#X obj 557 175 /;
#X msg 211 434 \; speed 8 \; cents -4200 \; grain 400;
#X msg 90 437 \; speed -36 \; cents 200 \; grain 1000;
#X msg 90 509 \; speed 8 \; cents -3400 \; grain 400;
#X msg 90 365 \; speed 50 \; cents -4200 \; grain 100;
#X msg 211 507 \; speed 4 \; cents -2400 \; grain 14;
#X text 107 338 presets:;
#X obj 212 340 loadbang;
#X msg 212 365 \; speed 100 \; grain 25 \; cents 0;
#X obj 480 120 t b f, f 14;
#X text 618 201 sample frequency;
#X obj 595 161 s \$0-size;
#X obj 557 200 s \$0-Hz;
#X text 23 29 In this example we can choose any grain size and have
a quite different approach. The buffer is read by [pimp~] and [phasor~]
objects \, one affects the pitch and the other the speed., f 57;
#X text 23 92 These two are combined and need to be compensated for
the desired result. We do that by subtracting the speed ratio from
the transposition ratio.;
#X text 23 142 The speed frequency is calculated by the speed ratio
and the sample frequency. The transposition frequency needs to correspond
to the grain size \, so we multiply the resulting ratio by the grain
frequency \, obtained by the grain size., f 57;
#X obj 291 275 gran.player~;
#X text 23 225 Open [pd grain-1] for more details. Below we have some
presets. The [gran.player~] object \, from ELSE \, is based on this
patch \, check its help file:;
#X obj 728 275 nbx 5 18 -1e+37 1e+37 0 0 empty speed empty 0 -8 0 13
-228856 -1 -1 20 256;
#X obj 643 521 +~;
#X obj 635 275 nbx 4 18 -1e+37 1e+37 0 0 empty cents empty 0 -8 0 13
-228856 -1 -1 0 256;
#X text 591 276 Cents;
#X obj 488 272 nbx 4 18 3 1e+37 0 0 empty grain empty 0 -8 0 13 -191407
-1 -1 25 256;
#X obj 658 346 -~;
#X obj 640 372 *~;
#X obj 643 561 out~;
#X obj 728 400 else/display~ 5;
#X obj 640 398 else/display~ 5;
#X text 776 401 Hz;
#X obj 635 303 cents2ratio;
#X obj 515 305 expr 1000 / $f1;
#X obj 488 363 ms2samps;
#X text 487 249 size (ms);
#X text 593 254 Transposition;
#N canvas 904 88 536 467 grain-2 0;
#X obj 211 223 +~;
#X obj 141 194 *~;
#X obj 306 371 *~;
#X obj 306 399 outlet~;
#X obj 229 94 inlet~;
#X obj 159 171 sh~;
#X obj 141 93 inlet~;
#X obj 229 123 phasor~;
#X obj 229 191 *~;
#X obj 211 308 tabread4~ \$0-buffer, f 9;
#X obj 211 282 wrap2~;
#X obj 301 143 r \$0-size;
#X obj 54 123 r~ \$0-samps;
#X obj 107 239 display~;
#X obj 134 310 display~;
#X obj 355 253 display~;
#X obj 139 373 outlet~;
#X text 91 45 Same thing \, but [pimp~] is out of phase.;
#X obj 141 123 pimp~ 0 0.5;
#X obj 324 204 envelope~;
#X connect 0 0 14 0;
#X connect 0 0 10 0;
#X connect 1 0 13 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 7 0;
#X connect 5 0 1 1;
#X connect 6 0 18 0;
#X connect 7 0 8 0;
#X connect 8 0 0 1;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X connect 11 0 8 1;
#X connect 11 0 10 2;
#X connect 12 0 5 0;
#X connect 14 0 16 0;
#X connect 18 0 1 0;
#X connect 18 0 19 0;
#X connect 18 1 5 1;
#X connect 19 0 2 1;
#X connect 19 0 15 0;
#X restore 661 478 pd grain-2;
#N canvas 178 37 576 564 grain-1 0;
#X obj 249 329 +~;
#X obj 194 300 *~;
#X obj 344 477 *~;
#X obj 344 505 outlet~;
#X obj 267 170 inlet~;
#X obj 212 277 sh~;
#X obj 362 310 envelope~;
#X obj 194 169 inlet~;
#X obj 267 229 phasor~;
#X obj 267 297 *~;
#X obj 249 414 tabread4~ \$0-buffer, f 9;
#X obj 249 388 wrap2~;
#X obj 194 229 pimp~;
#X obj 339 249 r \$0-size;
#X obj 104 229 r~ \$0-samps;
#X text 191 143 transp;
#X text 268 142 speed;
#X obj 267 197 display~ 8;
#X obj 194 197 display~ 8;
#X text 75 29 The speed frequency is multiplied by the sample lenght
in samples. The transposition frequency is sent to a [pimp~] object
\, which also controls the envelope. Its output is multiplied by the
grain size in samples and summed to the speed output. Now both frequencies
are combined and the sample is accessed.;
#X obj 142 367 display~;
#X obj 174 421 display~;
#X obj 393 414 display~;
#X obj 167 460 outlet~;
#X connect 0 0 21 0;
#X connect 0 0 11 0;
#X connect 1 0 0 0;
#X connect 1 0 20 0;
#X connect 2 0 3 0;
#X connect 4 0 17 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 6 0 22 0;
#X connect 7 0 18 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 2 0;
#X connect 11 0 10 0;
#X connect 12 0 1 0;
#X connect 12 0 6 0;
#X connect 12 1 5 1;
#X connect 13 0 9 1;
#X connect 13 0 11 2;
#X connect 14 0 5 0;
#X connect 17 0 8 0;
#X connect 18 0 12 0;
#X connect 21 0 23 0;
#X restore 570 477 pd grain-1;
#X obj 488 389 s~ \$0-samps;
#X floatatom 515 330 5 0 0 0 - - -;
#X text 381 330 Grain Frequency =>;
#X obj 728 362 *~;
#X obj 746 337 r \$0-Hz;
#X text 729 252 Speed (%);
#X text 591 397 transp;
#X text 689 399 Hz;
#X text 767 363 speed;
#X obj 728 307 / 100;
#X floatatom 471 425 0 0 0 0 - - -;
#X obj 562 523 -~;
#X obj 552 566 display~;
#X obj 854 529 +~;
#X obj 854 569 out~;
#N canvas 904 88 536 467 grain-2 0;
#X obj 211 223 +~;
#X obj 141 194 *~;
#X obj 306 371 *~;
#X obj 306 399 outlet~;
#X obj 229 94 inlet~;
#X obj 159 171 sh~;
#X obj 141 93 inlet~;
#X obj 229 123 phasor~;
#X obj 229 191 *~;
#X obj 211 308 tabread4~ \$0-buffer, f 9;
#X obj 211 282 wrap2~;
#X obj 301 143 r \$0-size;
#X obj 54 123 r~ \$0-samps;
#X obj 107 239 display~;
#X obj 134 310 display~;
#X obj 355 253 display~;
#X obj 139 373 outlet~;
#X text 91 45 Same thing \, but [pimp~] is out of phase.;
#X obj 141 123 pimp~;
#X obj 324 204 envelope~ 0.5;
#X connect 0 0 14 0;
#X connect 0 0 10 0;
#X connect 1 0 13 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 7 0;
#X connect 5 0 1 1;
#X connect 6 0 18 0;
#X connect 7 0 8 0;
#X connect 8 0 0 1;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X connect 11 0 8 1;
#X connect 11 0 10 2;
#X connect 12 0 5 0;
#X connect 14 0 16 0;
#X connect 18 0 1 0;
#X connect 18 0 19 0;
#X connect 18 1 5 1;
#X connect 19 0 2 1;
#X connect 19 0 15 0;
#X restore 872 486 pd grain-2;
#N canvas 245 98 576 564 grain-1 0;
#X obj 249 329 +~;
#X obj 194 300 *~;
#X obj 344 477 *~;
#X obj 344 505 outlet~;
#X obj 267 170 inlet~;
#X obj 212 277 sh~;
#X obj 362 310 envelope~;
#X obj 194 169 inlet~;
#X obj 267 229 phasor~;
#X obj 267 297 *~;
#X obj 249 414 tabread4~ \$0-buffer, f 9;
#X obj 249 388 wrap2~;
#X obj 194 229 pimp~;
#X obj 339 249 r \$0-size;
#X obj 104 229 r~ \$0-samps;
#X text 191 143 transp;
#X text 268 142 speed;
#X obj 267 197 display~ 8;
#X obj 194 197 display~ 8;
#X text 75 29 The speed frequency is multiplied by the sample lenght
in samples. The transposition frequency is sent to a [pimp~] object
\, which also controls the envelope. Its output is multiplied by the
grain size in samples and summed to the speed output. Now both frequencies
are combined and the sample is accessed.;
#X obj 142 367 display~;
#X obj 174 421 display~;
#X obj 393 414 display~;
#X obj 167 460 outlet~;
#X connect 0 0 21 0;
#X connect 0 0 11 0;
#X connect 1 0 0 0;
#X connect 1 0 20 0;
#X connect 2 0 3 0;
#X connect 4 0 17 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 6 0 22 0;
#X connect 7 0 18 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 2 0;
#X connect 11 0 10 0;
#X connect 12 0 1 0;
#X connect 12 0 6 0;
#X connect 12 1 5 1;
#X connect 13 0 9 1;
#X connect 13 0 11 2;
#X connect 14 0 5 0;
#X connect 17 0 8 0;
#X connect 18 0 12 0;
#X connect 21 0 23 0;
#X restore 781 485 pd grain-1;
#X obj 773 531 -~;
#X obj 763 574 display~;
#X obj 480 30 initmess read -resize ../../../../../samples/voice.wav
\$0-buffer, f 39;
#X connect 1 0 12 0;
#X connect 2 0 3 0;
#X connect 3 0 15 0;
#X connect 10 0 11 0;
#X connect 12 0 2 0;
#X connect 12 1 3 1;
#X connect 12 1 14 0;
#X connect 21 0 48 0;
#X connect 22 0 28 0;
#X connect 22 0 28 1;
#X connect 23 0 32 0;
#X connect 25 0 33 0;
#X connect 25 0 34 0;
#X connect 26 0 27 1;
#X connect 27 0 30 0;
#X connect 29 0 37 1;
#X connect 29 0 38 1;
#X connect 29 0 55 1;
#X connect 29 0 54 1;
#X connect 30 0 37 0;
#X connect 30 0 38 0;
#X connect 30 0 55 0;
#X connect 30 0 54 0;
#X connect 32 0 26 0;
#X connect 33 0 40 0;
#X connect 34 0 39 0;
#X connect 34 0 49 0;
#X connect 37 0 50 1;
#X connect 37 1 22 1;
#X connect 38 0 50 0;
#X connect 38 1 22 0;
#X connect 40 0 27 0;
#X connect 42 0 29 0;
#X connect 43 0 42 1;
#X connect 48 0 26 1;
#X connect 48 0 42 0;
#X connect 50 0 51 0;
#X connect 52 0 53 0;
#X connect 52 0 53 1;
#X connect 54 0 56 1;
#X connect 54 1 52 1;
#X connect 55 0 56 0;
#X connect 55 1 52 0;
#X connect 56 0 57 0;
#X connect 58 0 1 0;
